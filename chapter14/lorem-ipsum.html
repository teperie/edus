<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Downloadable Lorem Ipsum Generator</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        textarea {
            width: 100%;
            height: 300px;
        }
    </style>
</head>

<body>

    <h1>Downloadable Lorem Ipsum Generator</h1>
    <label for="paragraphs">Number of paragraphs:</label>
    <input type="number" id="paragraphs" value="5" min="1" max="200">
    <button onclick="generateLorem()">Generate</button>
    <button onclick="downloadLorem()">Download .txt</button>

    <textarea id="output" readonly></textarea>

    <script>
        const words = [
            "lorem", "ipsum", "dolor", "sit", "amet", "consectetur", "adipiscing", "elit",
            "integer", "nec", "odio", "praesent", "libero", "sed", "cursus", "ante", "dapibus", "diam",
            "sed", "nisi", "nulla", "quis", "sem", "at", "nibh", "elementum", "imperdiet", "duis", "sagittis", "ipsum",
            "praesent", "mauris", "fusce", "nec", "tellus", "sed", "augue", "semper", "porta", "mauris", "massa",
            "vestibulum", "lacinia", "arcu", "eget", "nulla", "class", "aptent", "taciti", "sociosqu", "ad", "litora",
            "torquent", "per", "conubia", "nostra", "per", "inceptos", "himenaeos", "curabitur", "sodales", "ligula",
            "in", "libero", "sed", "dignissim", "lacinia", "nunc", "curabitur", "tortor", "pellentesque", "nibh",
            "aenean", "quam", "in", "scelerisque", "sem", "at", "dolor", "maecenas", "mattis", "sed", "convallis",
            "tristique", "sem", "proin", "ut", "ligula", "vel", "nunc", "egestas", "porttitor", "morbi", "lectus",
            "risus", "iaculis", "vel", "suscipit", "quis", "luctus", "non", "massa", "fusce", "ac", "turpis", "quis",
            "ligula", "lacinia", "aliquet", "mauris", "imperdiet", "enim", "elementum", "sapien", "varius", "eu",
            "bibendum", "magna", "aliquam", "erat", "volutpat", "donec", "vulputate", "sapien", "nec", "dapibus",
            "euismod", "nunc", "tristique", "orci", "ac", "efficitur", "metus", "massa", "ac", "enim", "quisque",
            "interdum", "ex", "eu", "hendrerit", "vehicula", "quam", "nunc", "feugiat", "purus", "at", "volutpat",
            "urna", "metus", "a", "tellus", "cras", "et", "massa", "non", "leo", "pharetra", "aliquet", "in", "vitae",
            "nunc", "ut", "bibendum", "ex", "nam", "luctus", "urna", "ut", "turpis", "accumsan", "convallis"
        ];

        function randomWord() {
            return words[Math.floor(Math.random() * words.length)];
        }

        function randomSentence() {
            const length = Math.floor(Math.random() * 10) + 8; // 8~18 words
            let sentence = [];
            for (let i = 0; i < length; i++) {
                sentence.push(randomWord());
            }
            sentence[0] = sentence[0].charAt(0).toUpperCase() + sentence[0].slice(1);
            return sentence.join(" ") + ".";
        }

        function randomParagraph() {
            const sentences = Math.floor(Math.random() * 5) + 3; // 3~7 sentences
            let paragraph = [];
            for (let i = 0; i < sentences; i++) {
                paragraph.push(randomSentence());
            }
            return paragraph.join(" ");
        }

        let lastGenerated = "";

        function generateLorem() {
            const count = parseInt(document.getElementById("paragraphs").value, 10);
            let result = "";
            for (let i = 0; i < count; i++) {
                result += randomParagraph() + "\n\n";
            }
            lastGenerated = result.trim();
            document.getElementById("output").value = lastGenerated;
        }

        function downloadLorem() {
            if (!lastGenerated) {
                alert("Please generate Lorem Ipsum first!");
                return;
            }
            const blob = new Blob([lastGenerated], { type: "text/plain" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "lorem-ipsum.txt";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>

</body>

</html>